(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j;$.Define($$,{WebSharper:{Owin:{WebSocket:{Test:{Client:{WS:function(k){var l;l=c.ConnectTo(k,e.Start(function(m){var n;n=function(){return f.Delay(function(){var q;q=m.Receive({$:0});return f.Bind(q,function(r){var s,t,u,v,w,x;s=r[1];t=r[0];if(t.$==3){if(g){g.log("Connection closed.");}u=f.Return(null);}else{if(t.$==2){if(g){g.log("WebSocket conenction open.");}u=f.Return(null);}else{if(t.$==1){v=t.$0.message;if(g){g.log(v);}u=f.Return(null);}else{w=t.$0;if(w.$==1){x=w.$0;if(g){g.log(x);}u=f.Return(null);}else{u=f.Return(null);}}}}return f.Combine(u,f.Delay(function(){return n(null);}));});});};return n(null);},{$:0}));f.Start(f.Delay(function(){return f.While(function(){return true;},f.Delay(function(){return f.Bind(f.Sleep(1000),function(){l.mailbox.AddLast({$:0,$0:{$:0,$0:"HELLO"}});l.resume();return f.Return(null);});}));}),{$:0});return j.Tags().text("");}}}}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Owin);b=$.Safe(a.WebSocket);c=$.Safe(b.Client);d=$.Safe($$.WebSharper.Control);e=$.Safe(d.MailboxProcessor);f=$.Safe($$.WebSharper.Concurrency);g=$.Safe($$.console);h=$.Safe($$.WebSharper.Html);i=$.Safe(h.Client);return j=$.Safe(i.Tags);});$.OnLoad(function(){return;});}());
